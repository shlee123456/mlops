# Ralph Progress Log
Started: Mon Jan 26 13:38:07 KST 2026
---

## Codebase Patterns
- **SQLAdmin form_extra_fields는 미구현**: SQLAdmin 0.22.0에서 form_extra_fields 속성은 설정할 수 있지만 실제로 처리되지 않음 (sqladmin/models.py의 scaffold_form()과 sqladmin/forms.py의 get_model_form()에 처리 로직 없음)
- **Password 필드 추가 우회법**: insert_model/update_model에서 request.form()을 직접 읽어 처리 (현재 UserAdmin에서 사용 중)
- **Form 커스터마이징 대안**: 1) scaffold_form() 오버라이드, 2) form 속성에 WTForms Form 클래스 직접 할당, 3) form_overrides (기존 필드만)

---

## 2026-01-26 13:41:17 - US-001
- SQLAdmin form_extra_fields 렌더링 조사 완료
- Files changed: test_form_extra_fields.py (최소 재현 테스트)
- **원인 확인:**
  - SQLAdmin 0.22.0 문서에 form_extra_fields가 명시되어 있지 않음
  - 소스 코드 분석 결과 (sqladmin/models.py, sqladmin/forms.py) form_extra_fields 처리 로직이 구현되지 않음
  - Flask-Admin에는 존재하지만 SQLAdmin은 미구현 상태
- **현재 코드 동작 확인:**
  - tests/serve/test_user_admin.py - 5개 테스트 모두 통과
  - UserAdmin.insert_model()과 update_model()에서 request.form()을 직접 읽어 password 처리
  - 이 방식으로 기능은 정상 작동하지만, 폼 UI에 password 필드가 렌더링되지 않는 문제는 여전히 존재
- **참고 자료:**
  - GitHub Discussion #359: PasswordField 렌더링 방법 (form_create_rules/form_edit_rules 활용)
  - SQLAdmin 공식 문서: form_extra_fields 미언급, form 속성 직접 지정 권장
  - 소스 코드: https://github.com/aminalaee/sqladmin/blob/main/sqladmin/forms.py

**Learnings for future iterations:**
- form_extra_fields는 Flask-Admin 레거시 속성으로 SQLAdmin에서는 작동하지 않음
- SQLAdmin에서 커스텀 필드 추가 시 scaffold_form() 오버라이드 또는 form 속성 직접 할당 필요
- 테스트가 통과해도 UI 렌더링 문제는 별개 - 브라우저 확인 필수
- SQLAdmin은 Flask-Admin에서 영감을 받았지만 모든 기능이 구현된 것은 아님

---

## 2026-01-26 13:43:20 - US-002
- 커스텀 템플릿 방식 조사 및 불가 판단
- Files changed: (없음)
- **조사 결과:**
  - SQLAdmin 템플릿은 `create_template` 속성으로 오버라이드 가능
  - 기본 템플릿 구조: create.html → render_form_fields() 매크로 → form 객체의 필드 자동 렌더링
  - **문제점**: form_extra_fields가 form 객체에 필드를 추가하지 않음 (US-001에서 확인)
  - 템플릿에서 수동으로 password 필드를 하드코딩하는 것은 가능하지만:
    - WTForms 폼 검증과 분리됨
    - CSRF 토큰, 에러 메시지 처리 등을 수동 구현해야 함
    - 유지보수가 어렵고 SQLAdmin 업그레이드 시 깨질 가능성 높음
- **결론**: 커스텀 템플릿 방식은 **비권장** (근본 해결책 아님)

**Learnings for future iterations:**
- 템플릿 오버라이드는 UI 커스터마이징에는 유용하지만, 폼 필드 추가에는 적합하지 않음
- render_form_fields() 매크로는 form 객체의 필드만 렌더링하므로 form 객체에 필드가 없으면 소용없음
- 근본 해결을 위해서는 form 객체 자체를 수정해야 함 (scaffold_form 오버라이드 또는 form 속성 직접 지정)

---
