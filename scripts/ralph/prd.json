{
  "project": "MLOps Chatbot",
  "branchName": "fix/admin-password-field",
  "description": "Admin UI 비밀번호 필드 렌더링 버그 수정 - SQLAdmin form_extra_fields UI 렌더링 문제 해결",
  "userStories": [
    {
      "id": "US-001",
      "title": "SQLAdmin form_extra_fields 렌더링 조사",
      "description": "As a 개발자, I want form_extra_fields가 왜 렌더링되지 않는지 원인을 파악하고 싶다 so that 올바른 해결 방법을 적용할 수 있다.",
      "acceptanceCriteria": [
        "SQLAdmin 0.22.0 문서에서 form_extra_fields 사용법 확인",
        "SQLAdmin GitHub Issues/Discussions에서 유사 사례 검색",
        "로컬에서 최소 재현 코드 작성하여 테스트",
        "원인을 progress.txt에 기록 (템플릿 문제 / 설정 문제 / 버그 등)",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "원인 확인: form_extra_fields는 SQLAdmin 0.22.0에 구현되지 않은 기능. sqladmin/models.py와 sqladmin/forms.py에 처리 로직 없음. Flask-Admin 레거시 속성. 대안: scaffold_form() 오버라이드 또는 form 속성 직접 지정 필요."
    },
    {
      "id": "US-002",
      "title": "커스텀 템플릿 방식으로 해결 시도",
      "description": "As a 개발자, I want SQLAdmin 커스텀 템플릿을 사용하여 password 필드를 명시적으로 렌더링하고 싶다 so that form_extra_fields의 한계를 우회할 수 있다.",
      "acceptanceCriteria": [
        "src/serve/admin/templates/user_create.html 생성",
        "Jinja2 템플릿에서 password 필드 명시적으로 추가",
        "UserAdmin에 create_template = 'user_create.html' 설정",
        "브라우저에서 Create 페이지 접속 시 password 필드 확인",
        "브라우저에서 User 생성 시 비밀번호 입력 및 저장 성공 확인",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "조사 결과: 비권장 방식으로 판단. render_form_fields() 매크로가 form 객체의 필드만 렌더링하므로, 템플릿에 필드를 하드코딩해도 WTForms 검증과 분리되어 유지보수성 낮음. 근본 해결을 위해서는 form 객체 자체 수정 필요."
    },
    {
      "id": "US-003",
      "title": "form_include_columns 방식으로 해결 시도",
      "description": "As a 개발자, I want form_excluded_columns 대신 form_include_columns를 사용해보고 싶다 so that 필드 포함 방식으로 명시적으로 제어할 수 있다.",
      "acceptanceCriteria": [
        "form_excluded_columns 제거",
        "사용 가능한 모든 필드 나열 후 password 포함 여부 확인",
        "SQLAdmin 내부 코드 분석하여 extra_fields 처리 방식 확인",
        "브라우저에서 확인",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "scaffold_form 오버라이드 방식",
      "description": "As a 개발자, I want UserAdmin.scaffold_form()을 직접 오버라이드하고 싶다 so that 폼 생성 로직을 완전히 제어할 수 있다.",
      "acceptanceCriteria": [
        "async def scaffold_form(self) 메서드 오버라이드",
        "기본 폼에 password 필드를 수동으로 추가",
        "브라우저에서 확인",
        "tests/serve/test_user_admin.py 모두 통과",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "WTForms 직접 통합 (최후의 수단)",
      "description": "As a 개발자, I want SQLAdmin의 자동 폼 생성을 우회하고 WTForms를 직접 사용하고 싶다 so that 완전한 제어권을 가질 수 있다.",
      "acceptanceCriteria": [
        "UserAdmin에 form 속성 직접 정의 (WTForms Form 클래스)",
        "username, password, role, is_active 필드 모두 수동 정의",
        "insert_model, update_model 로직 유지",
        "브라우저에서 확인",
        "tests/serve/test_user_admin.py 모두 통과",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "해결 방법 문서화 및 테스트 강화",
      "description": "As a 개발자, I want 최종 해결 방법을 문서화하고 브라우저 테스트를 추가하고 싶다 so that 향후 유사한 문제를 방지할 수 있다.",
      "acceptanceCriteria": [
        "src/serve/admin/CLAUDE.md에 해결 방법 및 주의사항 추가",
        "progress.txt에 최종 해결 방법 및 학습 내용 기록",
        "선택사항: Playwright 기반 E2E 테스트 추가 (브라우저 자동화)",
        "README 또는 문서에 Admin UI 사용법 업데이트",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
