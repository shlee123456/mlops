{
  "project": "MLOps Chatbot",
  "branchName": "feature/logging-integration-test",
  "description": "로깅 시스템 통합 테스트 - vLLM 로그 생성 확인, Loki 설정 검증, 전체 스택 테스트",
  "userStories": [
    {
      "id": "US-001",
      "title": "vLLM 로그 파일 생성 실제 테스트",
      "description": "As a 개발자, I want vLLM 컨테이너를 실제로 실행하여 로그 파일이 생성되는지 확인하고 싶다 so that 이전 작업(US-001)에서 구현한 로깅 설정이 실제 환경에서 동작하는지 검증할 수 있다.",
      "acceptanceCriteria": [
        "docker-compose.serving.yml로 vLLM 컨테이너 기동",
        "logs/vllm/ 디렉토리에 로그 파일 생성 확인",
        "로그 파일에 모델 로딩 메시지 포함 여부 검증",
        "vLLM API 엔드포인트(/v1/models)에 실제 요청 발송",
        "로그 파일에 API 요청 로그 기록 확인",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": "vLLM 로그 설정 개선 중. HuggingFace 캐시 read-only 문제 수정, start-vllm.sh 로그 리다이렉션 방식 변경 (process substitution → subshell + pipe). Docker 이미지 재빌드 후 최종 검증 필요."
    },
    {
      "id": "US-002",
      "title": "Loki/Alloy 모니터링 설정 검증",
      "description": "As a DevOps 엔지니어, I want Loki/Alloy 설정이 변경된 로그 경로를 올바르게 참조하는지 확인하고 싶다 so that 모니터링 시스템이 모든 서비스 로그를 수집할 수 있다.",
      "acceptanceCriteria": [
        "deployment/monitoring/alloy/ 또는 promtail 설정 파일 확인",
        "로그 경로 설정이 logs/vllm/, logs/fastapi/, logs/mlflow/를 참조하는지 검증",
        "경로가 잘못되었거나 누락된 경우 수정",
        "docker-compose.monitoring.yml로 모니터링 스택 기동",
        "Loki API(/loki/api/v1/labels)로 수집 중인 로그 라벨 확인",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Grafana 로그 조회 테스트",
      "description": "As a 개발자, I want Grafana에서 모든 서비스의 로그를 조회할 수 있는지 확인하고 싶다 so that 실시간 로그 모니터링이 가능한지 검증할 수 있다.",
      "acceptanceCriteria": [
        "Grafana UI(http://localhost:3000)에 접근",
        "Loki 데이터소스 연결 상태 확인",
        "Explore 메뉴에서 {service=\"vllm\"} 쿼리 실행",
        "Explore 메뉴에서 {service=\"fastapi\"} 쿼리 실행",
        "Explore 메뉴에서 {service=\"mlflow\"} 쿼리 실행",
        "각 서비스의 로그가 조회되면 성공, 조회되지 않으면 Alloy 설정 수정",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "전체 스택 통합 테스트",
      "description": "As a 시스템 관리자, I want 전체 Docker Compose 스택을 기동하여 모든 서비스가 정상 동작하는지 확인하고 싶다 so that 프로덕션 환경에 배포할 준비가 되었는지 검증할 수 있다.",
      "acceptanceCriteria": [
        "docker-compose.yml(전체 스택) 또는 개별 스택 파일로 모든 서비스 기동",
        "각 서비스 헬스체크 엔드포인트 확인 (vLLM, FastAPI, MLflow, Prometheus, Grafana, Loki)",
        "FastAPI → vLLM 추론 요청 테스트 (curl 또는 pytest)",
        "MLflow UI 접근 확인 (http://localhost:5050)",
        "scripts/check_logs.sh 실행하여 모든 서비스 로그 검증",
        "모든 서비스가 정상 동작하고 로그가 생성되면 성공",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "통합 테스트 결과 문서화",
      "description": "As a 개발자, I want 통합 테스트 결과를 문서화하고 싶다 so that 향후 배포 시 참고할 수 있다.",
      "acceptanceCriteria": [
        "테스트 결과를 .context/terminal/integration_test_$(date +%s).log에 기록",
        "각 서비스별 테스트 통과/실패 상태 요약",
        "발견된 문제와 해결 방법 기록",
        "docs/references/LOGGING.md에 통합 테스트 섹션 추가 (선택)",
        "deployment/CLAUDE.md에 전체 스택 기동 방법 업데이트 (필요 시)",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    }
  ]
}